{"ast":null,"code":"import * as glMatrix from \"./gl-matrix\";\n\nclass WebGLCamera {\n  constructor(glContext, position, rotation) {\n    this.fieldOfView = 45;\n    this.zNear = 0.01;\n    this.zFar = 100.0;\n    this.glContext = glContext;\n    this.position = position;\n    this.rotation = rotation;\n    this.regenerateProjection();\n  }\n\n  setNewPosition(position) {\n    this.position = position;\n    this.regenerateProjection();\n  }\n\n  setNewRotation(rotation) {\n    this.rotation = rotation;\n    this.regenerateProjection();\n  }\n\n  rotateAroundOrigin(rads) {\n    this.rotation[1] = (this.rotation[1] + rads) % 6.28;\n\n    if (this.rotation[1] < 0) {\n      this.rotation[1] = 6.28 - this.rotation[1];\n    } //console.log(\"Camera Rotation:\"+this.rotation[1]);\n\n\n    glMatrix.mat4.rotate(this.projectionMatrix, this.projectionMatrix, rads, [0, 1, 0]);\n  }\n\n  regenerateProjection() {\n    const fov = this.fieldOfView * Math.PI / 180;\n    const aspect = this.glContext.canvas.clientWidth / this.glContext.canvas.clientHeight;\n    this.projectionMatrix = glMatrix.mat4.create();\n    glMatrix.mat4.perspective(this.projectionMatrix, fov, aspect, this.zNear, this.zFar);\n    glMatrix.mat4.translate(this.projectionMatrix, this.projectionMatrix, this.position);\n    glMatrix.mat4.rotate(this.projectionMatrix, this.projectionMatrix, this.rotation[0], [1, 0, 0]);\n    glMatrix.mat4.rotate(this.projectionMatrix, this.projectionMatrix, this.rotation[1], [0, 1, 0]);\n    glMatrix.mat4.rotate(this.projectionMatrix, this.projectionMatrix, this.rotation[2], [0, 0, 1]);\n  }\n\n}\n\nexport default WebGLCamera;","map":{"version":3,"sources":["/Users/nathanromriell/Desktop/Portfolio/objtoweb/webglviewer/src/Data/WebGLCamera.js"],"names":["glMatrix","WebGLCamera","constructor","glContext","position","rotation","fieldOfView","zNear","zFar","regenerateProjection","setNewPosition","setNewRotation","rotateAroundOrigin","rads","mat4","rotate","projectionMatrix","fov","Math","PI","aspect","canvas","clientWidth","clientHeight","create","perspective","translate"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,aAA1B;;AAEA,MAAMC,WAAN,CACA;AASIC,EAAAA,WAAW,CAACC,SAAD,EAAYC,QAAZ,EAAsBC,QAAtB,EACX;AAAA,SATAC,WASA,GATc,EASd;AAAA,SARAC,KAQA,GARQ,IAQR;AAAA,SAPAC,IAOA,GAPO,KAOP;AACI,SAAKL,SAAL,GAAiBA,SAAjB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKI,oBAAL;AACH;;AAEDC,EAAAA,cAAc,CAACN,QAAD,EAAU;AACpB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKK,oBAAL;AACH;;AAEDE,EAAAA,cAAc,CAACN,QAAD,EAAU;AACpB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKI,oBAAL;AACH;;AAEDG,EAAAA,kBAAkB,CAACC,IAAD,EAAM;AACpB,SAAKR,QAAL,CAAc,CAAd,IAAmB,CAAC,KAAKA,QAAL,CAAc,CAAd,IAAiBQ,IAAlB,IAAwB,IAA3C;;AACA,QAAG,KAAKR,QAAL,CAAc,CAAd,IAAmB,CAAtB,EAAwB;AACpB,WAAKA,QAAL,CAAc,CAAd,IAAmB,OAAK,KAAKA,QAAL,CAAc,CAAd,CAAxB;AACH,KAJmB,CAKpB;;;AACAL,IAAAA,QAAQ,CAACc,IAAT,CAAcC,MAAd,CAAqB,KAAKC,gBAA1B,EACI,KAAKA,gBADT,EAEIH,IAFJ,EAGI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAHJ;AAIH;;AAEDJ,EAAAA,oBAAoB,GAAG;AACnB,UAAMQ,GAAG,GAAG,KAAKX,WAAL,GAAiBY,IAAI,CAACC,EAAtB,GAAyB,GAArC;AACA,UAAMC,MAAM,GAAG,KAAKjB,SAAL,CAAekB,MAAf,CAAsBC,WAAtB,GAAkC,KAAKnB,SAAL,CAAekB,MAAf,CAAsBE,YAAvE;AACA,SAAKP,gBAAL,GAAwBhB,QAAQ,CAACc,IAAT,CAAcU,MAAd,EAAxB;AACAxB,IAAAA,QAAQ,CAACc,IAAT,CAAcW,WAAd,CAA0B,KAAKT,gBAA/B,EACIC,GADJ,EAEIG,MAFJ,EAGI,KAAKb,KAHT,EAII,KAAKC,IAJT;AAKAR,IAAAA,QAAQ,CAACc,IAAT,CAAcY,SAAd,CAAwB,KAAKV,gBAA7B,EAA+C,KAAKA,gBAApD,EAAsE,KAAKZ,QAA3E;AACAJ,IAAAA,QAAQ,CAACc,IAAT,CAAcC,MAAd,CAAqB,KAAKC,gBAA1B,EACI,KAAKA,gBADT,EAEI,KAAKX,QAAL,CAAc,CAAd,CAFJ,EAGI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAHJ;AAIAL,IAAAA,QAAQ,CAACc,IAAT,CAAcC,MAAd,CAAqB,KAAKC,gBAA1B,EACI,KAAKA,gBADT,EAEI,KAAKX,QAAL,CAAc,CAAd,CAFJ,EAGI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAHJ;AAIAL,IAAAA,QAAQ,CAACc,IAAT,CAAcC,MAAd,CAAqB,KAAKC,gBAA1B,EACI,KAAKA,gBADT,EAEI,KAAKX,QAAL,CAAc,CAAd,CAFJ,EAGI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAHJ;AAIH;;AA7DL;;AAgEA,eAAeJ,WAAf","sourcesContent":["import * as glMatrix from \"./gl-matrix\"\n\nclass WebGLCamera\n{\n    fieldOfView = 45;\n    zNear = 0.01;\n    zFar = 100.0;\n    glContext;\n    position;\n    rotation;\n    projectionMatrix;\n\n    constructor(glContext, position, rotation)\n    {\n        this.glContext = glContext;\n        this.position = position;\n        this.rotation = rotation;\n        this.regenerateProjection();\n    }\n\n    setNewPosition(position){\n        this.position = position;\n        this.regenerateProjection();\n    }\n\n    setNewRotation(rotation){\n        this.rotation = rotation;\n        this.regenerateProjection();\n    }\n\n    rotateAroundOrigin(rads){\n        this.rotation[1] = (this.rotation[1]+rads)%6.28;\n        if(this.rotation[1] < 0){\n            this.rotation[1] = 6.28-this.rotation[1];\n        }\n        //console.log(\"Camera Rotation:\"+this.rotation[1]);\n        glMatrix.mat4.rotate(this.projectionMatrix,\n            this.projectionMatrix,\n            rads,\n            [0,1,0]);\n    }\n\n    regenerateProjection() {\n        const fov = this.fieldOfView*Math.PI/180;\n        const aspect = this.glContext.canvas.clientWidth/this.glContext.canvas.clientHeight;\n        this.projectionMatrix = glMatrix.mat4.create();\n        glMatrix.mat4.perspective(this.projectionMatrix,\n            fov,\n            aspect,\n            this.zNear,\n            this.zFar);\n        glMatrix.mat4.translate(this.projectionMatrix, this.projectionMatrix, this.position);\n        glMatrix.mat4.rotate(this.projectionMatrix,\n            this.projectionMatrix,\n            this.rotation[0],\n            [1,0,0]);\n        glMatrix.mat4.rotate(this.projectionMatrix,\n            this.projectionMatrix,\n            this.rotation[1],\n            [0,1,0]);\n        glMatrix.mat4.rotate(this.projectionMatrix,\n            this.projectionMatrix,\n            this.rotation[2],\n            [0,0,1]);\n    }\n}\n\nexport default WebGLCamera"]},"metadata":{},"sourceType":"module"}